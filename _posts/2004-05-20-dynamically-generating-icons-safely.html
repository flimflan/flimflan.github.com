---
title: Dynamically Generating Icons, safely
permalink: DynamicallyGeneratingIconsSafely.html
layout: migrated
date: 2004-05-20
id: fd6dd3ab-a159-4e55-8ede-196376116b9e
published_at: 2004-05-20 20:21:00.000000000 -05:00

---

<p>My development efforts went on a major tangent recently when I
discovered there was no "safe" way to dynamically generate an
icon&nbsp;in the .NET Framework (using Icon.FromHandle() requires the
UnmanagedCode SecurityPermission).&nbsp; What was supposed to be a very
minor feature of an application - updating a tray icon with custom text
-&nbsp;turned into a major time sucker.&nbsp; I was forced to learn the
innards of the Bitmap and Icon file formats and write my own conversion
code.&nbsp; Isn't this the kind of coding the .NET Framework is
supposed to prevent?&nbsp; We should be writing business logic, not
common image format conversion routines.&nbsp; I'm not attacking .NET
in general, there is no question it has made me more productive, I'm
just a little bitter that I got bitten by one of the edge cases. (I
have to admit, I enjoyed doing the "low level" coding&nbsp;for a while,
I just wasn't planning on the time requirement)</p>
<p>Anyway, the good news is, I did it, and now it's done.&nbsp; I wrote
the code so you don't have to.&nbsp; I have posted it as&nbsp;<a href="http://www.codeproject.com/dotnet/safeicon.asp">my first ever article on The Code Project</a>.&nbsp; Check it out and let me know what you think.</p>

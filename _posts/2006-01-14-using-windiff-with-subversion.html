---
title: Using WinDiff with SubVersion
permalink: UsingWinDiffWithSubVersion.html
layout: migrated
date: 2006-01-14
dasblog_id: f9ca34d6-ab8a-4e8e-93b2-b3ed99c5bd68
published_at: 2006-01-14 15:25:43.812000000 -06:00
tags: General
comments: []

---

<P>This is a tip for anyone using the <A href="http://subversion.tigris.org/">SubVersion</A> command-line client (svn.exe) that can't mentally process unix-style diff output.</P>
<P>By default, running the svn diff command on a modified file in your working directly will dump diff output to the console:</P>
<P><FONT face="Courier New" color=#000080 size=1>C:\work\ProfileView&gt;svn diff<BR>Index: ControlBuilder.cs<BR>===================================================================<BR>--- ControlBuilder.cs&nbsp;&nbsp; (revision 25)<BR>+++ ControlBuilder.cs&nbsp;&nbsp; (working copy)<BR>@@ -59,10 +59,11 @@<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (validationType != ValidationDataType.String)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator = new CompareValidator();<BR>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.ID = "val_" + property.Name;<BR>+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.ID = "v" + property.Name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.Operator = ValidationCompareOperator.DataTypeCheck;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.Type = validationType;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.ValidationGroup = DEFAULT_VALIDATION_GROUP;<BR>+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.SkinID = "validators";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.ErrorMessage = DEFAULT_VALIDATION_ERROR_MESSAGE;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validator.Display = ValidatorDisplay.Dynamic;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</FONT></P>
<P>In this simple example, you can probably figure out what changed. But if the modifications were more extensive, the output would be harder to interpret.</P>
<P>Enter WinDiff. WinDiff is a graphical utility for visually comparing 2 files or the contents of 2 folders. There are many other similar tools available - I choose WinDiff because its free, and its already on my system. It comes with Visual Studio .NET (if you install the VC++ Tools); or if you don't own VS.NET, you can get it with the <A href="http://www.google.com/search?q=windows+support+tools+site%3Amicrosoft.com">Windows Support Tools</A>.</P>
<P>The SubVersion client allows you to specify a 3rd party diff tool using the diff-cmd argument. However, the argument list it passes to the tool does not match the input arguments that windiff.exe is expecting. The solution is to create an intermediate batch file that translates the arguments. I created svnwindiff.bat in my SubVersion install folder (c:\apps\subversion). It contains a single command:<BR><FONT face="Courier New" size=1>"C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\Bin\windiff.exe" %6 %7</FONT></P>
<P>I then specify this batch file as my external diff tool:<BR><FONT face="Courier New" color=#000000 size=1>C:\work\ProfileView&gt;svn diff --diff-cmd c:\apps\subversion\svnwindiff.bat</FONT></P>
<P>Which will open the following window: <IMG alt="Changes viewed in WinDiff" hspace=0 src="/assets/post_images/svnwindiff.jpg" align=baseline border=0></P>
<P>Finally, to save yourself some typing, you can set WinDiff as your default diff tool by editing your SubVersion config file located at:<BR><FONT face="Courier New" size=1>C:\Documents and Settings\<EM>username</EM>\Application Data\Subversion\config</FONT> </P>
<P>Find the commented (#) line for diff-cmd, uncomment it and set the path,&nbsp;so it looks&nbsp;something like this:<BR><FONT face="Courier New" color=#000000 size=1>diff-cmd = c:\apps\subversion\svnwindiff.bat</FONT></P>
<P>Now, simply typing <FONT face="Courier New" size=1>svn diff</FONT> at a command-line will automatically launch WinDiff to visually&nbsp;display the differences.</P>
<P><STRONG><FONT color=#ff0000>Update</FONT></STRONG>: I've been taken to task for mentioning an ancient diff tool like WinDiff. While I stand by my initial reason for WinDiff ("its already on my system"), I figure it's in your best interest that I mention some more modern alternatives. A few free ones: <A href="http://kdiff3.sourceforge.net/">KDiff3</A>, <A href="http://winmerge.sourceforge.net/">WinMerge</A>, and <A href="http://www.prestosoft.com/ps.asp?page=edp_examdiff">ExamDiff</A>. <A href="http://www.hanselman.com/blog/">Scott</A> seems to like the $30 <A href="http://www.scootersoftware.com/">Beyond Compare</A>&nbsp;(although it is conspicuosly missing from his <A href="http://www.hanselman.com/blog/ScottHanselmans2005UltimateDeveloperAndPowerUsersToolList.aspx">Ultimate Tools List</A>).</P>
